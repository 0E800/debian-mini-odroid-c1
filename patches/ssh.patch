--- etc/init.d/ssh.orig	2015-01-01 21:17:24.871979629 -0700
+++ etc/init.d/ssh	2015-01-01 21:23:27.647986661 -0700
@@ -79,6 +79,16 @@
 	check_privsep_dir
 	check_for_no_start
 	check_dev_null
+	if run_by_init; then
+	    if [ ! -e /etc/ssh/ssh_host_rsa_key ]; then
+	        mount -n -o remount,rw / || echo "Remounting / rw failed"
+	        ssh-keygen -t rsa -N "" -f /etc/ssh/ssh_host_rsa_key
+	        ssh-keygen -t dsa -N "" -f /etc/ssh/ssh_host_dsa_key
+	        ssh-keygen -t ecdsa -N "" -f /etc/ssh/ssh_host_ecdsa_key
+	        sync || echo "sync failed"
+	        mount -n -o remount,ro / || echo "Remounting / ro failed"
+	    fi
+	fi
 	log_daemon_msg "Starting OpenBSD Secure Shell server" "sshd" || true
 	if start-stop-daemon --start --quiet --oknodo --pidfile /var/run/sshd.pid --exec /usr/sbin/sshd -- $SSHD_OPTS; then
 	    log_end_msg 0 || true
